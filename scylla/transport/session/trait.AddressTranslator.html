<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Translates IP addresses received from ScyllaDB nodes into locally reachable addresses."><title>AddressTranslator in scylla::transport::session - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="scylla" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0 (4d91de4e4 2025-02-17)" data-channel="1.85.0" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../scylla/index.html">scylla</a><span class="version">0.15.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Address<wbr>Translator</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.translate_address" title="translate_address">translate_address</a></li></ul><h3><a href="#foreign-impls">Implementations on Foreign Types</a></h3><ul class="block"><li><a href="#impl-AddressTranslator-for-HashMap%3C%26str,+%26str%3E" title="HashMap&#60;&#38;&#39;static str, &#38;&#39;static str&#62;">HashMap&#60;&#38;&#39;static str, &#38;&#39;static str&#62;</a></li><li><a href="#impl-AddressTranslator-for-HashMap%3CSocketAddr,+SocketAddr%3E" title="HashMap&#60;SocketAddr, SocketAddr&#62;">HashMap&#60;SocketAddr, SocketAddr&#62;</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In scylla::<wbr>transport::<wbr>session</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../index.html">scylla</a>::<wbr><a href="../index.html">transport</a>::<wbr><a href="index.html">session</a></span><h1>Trait <span class="trait">AddressTranslator</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/scylla/transport/session.rs.html#122-127">Source</a> </span></div><pre class="rust item-decl"><code>pub trait AddressTranslator: <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> {
    // Required method
    fn <a href="#tymethod.translate_address" class="fn">translate_address</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 self,
        untranslated_peer: &amp;'life1 <a class="struct" href="../topology/struct.UntranslatedPeer.html" title="struct scylla::transport::topology::UntranslatedPeer">UntranslatedPeer</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.85.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.85.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.85.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.85.0/core/net/socket_addr/enum.SocketAddr.html" title="enum core::net::socket_addr::SocketAddr">SocketAddr</a>, <a class="enum" href="../errors/enum.TranslationError.html" title="enum scylla::transport::errors::TranslationError">TranslationError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Translates IP addresses received from ScyllaDB nodes into locally reachable addresses.</p>
<p>The driver auto-detects new ScyllaDB nodes added to the cluster through server side pushed
notifications and through checking the system tables. For each node, the address the driver
receives corresponds to the address set as <code>rpc_address</code> in the node yaml file. In most
cases, this is the correct address to use by the driver and that is what is used by default.
However, sometimes the addresses received through this mechanism will either not be reachable
directly by the driver or should not be the preferred address to use to reach the node (for
instance, the <code>rpc_address</code> set on ScyllaDB nodes might be a private IP, but some clients
may have to use a public IP, or pass by a router, e.g. through NAT, to reach that node).
This interface allows to deal with such cases, by allowing to translate an address as sent
by a ScyllaDB node to another address to be used by the driver for connection.</p>
<p>Please note that the “known nodes” addresses provided while creating the <a href="type.Session.html" title="type scylla::transport::session::Session"><code>Session</code></a>
instance are not translated, only IP address retrieved from or sent by Cassandra nodes
to the driver are.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><section id="tymethod.translate_address" class="method"><a class="src rightside" href="../../../src/scylla/transport/session.rs.html#123-126">Source</a><h4 class="code-header">fn <a href="#tymethod.translate_address" class="fn">translate_address</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 self,
    untranslated_peer: &amp;'life1 <a class="struct" href="../topology/struct.UntranslatedPeer.html" title="struct scylla::transport::topology::UntranslatedPeer">UntranslatedPeer</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.85.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.85.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.85.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.85.0/core/net/socket_addr/enum.SocketAddr.html" title="enum core::net::socket_addr::SocketAddr">SocketAddr</a>, <a class="enum" href="../errors/enum.TranslationError.html" title="enum scylla::transport::errors::TranslationError">TranslationError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></div><h2 id="foreign-impls" class="section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor">§</a></h2><details class="toggle implementors-toggle"><summary><section id="impl-AddressTranslator-for-HashMap%3C%26str,+%26str%3E" class="impl"><a class="src rightside" href="../../../src/scylla/transport/session.rs.html#147-168">Source</a><a href="#impl-AddressTranslator-for-HashMap%3C%26str,+%26str%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.AddressTranslator.html" title="trait scylla::transport::session::AddressTranslator">AddressTranslator</a> for <a class="struct" href="https://doc.rust-lang.org/1.85.0/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;&amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.85.0/std/primitive.str.html">str</a>, &amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.85.0/std/primitive.str.html">str</a>&gt;</h3></section></summary><div class="impl-items"><section id="method.translate_address" class="method trait-impl"><a class="src rightside" href="../../../src/scylla/transport/session.rs.html#148-167">Source</a><a href="#method.translate_address" class="anchor">§</a><h4 class="code-header">fn <a href="#tymethod.translate_address" class="fn">translate_address</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 self,
    untranslated_peer: &amp;'life1 <a class="struct" href="../topology/struct.UntranslatedPeer.html" title="struct scylla::transport::topology::UntranslatedPeer">UntranslatedPeer</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.85.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.85.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.85.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.85.0/core/net/socket_addr/enum.SocketAddr.html" title="enum core::net::socket_addr::SocketAddr">SocketAddr</a>, <a class="enum" href="../errors/enum.TranslationError.html" title="enum scylla::transport::errors::TranslationError">TranslationError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-AddressTranslator-for-HashMap%3CSocketAddr,+SocketAddr%3E" class="impl"><a class="src rightside" href="../../../src/scylla/transport/session.rs.html#130-142">Source</a><a href="#impl-AddressTranslator-for-HashMap%3CSocketAddr,+SocketAddr%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.AddressTranslator.html" title="trait scylla::transport::session::AddressTranslator">AddressTranslator</a> for <a class="struct" href="https://doc.rust-lang.org/1.85.0/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.85.0/core/net/socket_addr/enum.SocketAddr.html" title="enum core::net::socket_addr::SocketAddr">SocketAddr</a>, <a class="enum" href="https://doc.rust-lang.org/1.85.0/core/net/socket_addr/enum.SocketAddr.html" title="enum core::net::socket_addr::SocketAddr">SocketAddr</a>&gt;</h3></section></summary><div class="impl-items"><section id="method.translate_address-1" class="method trait-impl"><a class="src rightside" href="../../../src/scylla/transport/session.rs.html#131-141">Source</a><a href="#method.translate_address-1" class="anchor">§</a><h4 class="code-header">fn <a href="#tymethod.translate_address" class="fn">translate_address</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 self,
    untranslated_peer: &amp;'life1 <a class="struct" href="../topology/struct.UntranslatedPeer.html" title="struct scylla::transport::topology::UntranslatedPeer">UntranslatedPeer</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.85.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.85.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.85.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.85.0/core/net/socket_addr/enum.SocketAddr.html" title="enum core::net::socket_addr::SocketAddr">SocketAddr</a>, <a class="enum" href="../errors/enum.TranslationError.html" title="enum scylla::transport::errors::TranslationError">TranslationError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.85.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></div></details><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../../trait.impl/scylla/transport/session/trait.AddressTranslator.js" data-ignore-extern-crates="std" async></script></section></div></main></body></html>